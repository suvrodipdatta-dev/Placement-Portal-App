<!DOCTYPE html>
<html>
<head>
    <title>Student Dashboard</title>
    <style>
        body { font-family: Arial; background: #f4f4f4; margin: 0; padding: 0; }

        .container {
            width: 90%; margin: auto; padding: 20px;
        }
        .welcome {
            background: white; padding: 15px; border-radius: 8px; 
            display: flex; justify-content: space-between;
            align-items: center; margin-bottom: 20px;
        }
        .section {
            background: white; padding: 20px;
            border-radius: 8px; margin-bottom: 20px;
        }
        .btn {
            padding: 6px 12px; background: #007bff;
            color: white; border: none; border-radius: 5px;
            cursor: pointer;
        }
        table {
            width: 100%; border-collapse: collapse; margin-top: 10px;
        }
        table, th, td {
            border: 1px solid #999; padding: 8px;
        }
        th { background: #e8e8e8; }
    </style>
</head>

<body>

<div class="container">

    <div class="welcome">
        <h3>Welcome {{ student.full_name }}</h3>

        <div>
            <a href="/edit_profile/{{ student.student_id }}">edit profile</a> |
            <a href="/student_history/{{ student.student_id }}">History</a> |
            <a href="/logout">logout</a>
        </div>
    </div>

    <!-- Organizations List -->
    <div class="section">
        <h3>Organizations</h3>

        {% for company in companies %}
            <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                <span>{{ company.name }}</span>
                <a href="/company/{{ company.company_id }}" class="btn">view details</a>
            </div>
        {% endfor %}
    </div>

    <!-- Applied Drives -->
    <div class="section">
        <h3>Applied Drives</h3>

        <table>
            <tr>
                <th>Sr No</th>
                <th>Drive Name</th>
                <th>Company</th>
                <th>Date</th>
                <th>Action</th>
            </tr>

            {% for app in applications %}
            <tr>
                <td>{{ loop.index }}</td>
                <td>{{ app.job.drive_name }}</td>
                <td>{{ app.job.company.company_name }}</td>
                <td>{{ app.application_date.strftime("%d/%m/%Y") }}</td>

                <td>
                    <a href="{{ url_for('view_drive', job_id=app.job.job_id) }}" class="btn">
                        View Details
                    </a>
                </td>
            </tr>
            {% endfor %}
        </table>

        {% if applications|length == 0 %}
            <p style="color:#777; margin-top:10px;">You have not applied for any drives yet.</p>
        {% endif %}
    </div>
</div>

</body>
</html>